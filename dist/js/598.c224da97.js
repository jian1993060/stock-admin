"use strict";(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[598],{31598:function(e,t,r){r.r(t),r.d(t,{default:function(){return w}});var a=function(){var e=this,t=e._self._c;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"table-operator"},[t("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.createForm.open({})}}},[e._v("创建")])],1),t("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:e.columns,data:e.loadData,showPagination:"auto",scroll:{x:"max-content"},bordered:""},scopedSlots:e._u([{key:"action",fn:function(r,a){return t("span",{},[[t("a",{on:{click:function(t){return e.handlerShowDetails(a)}}},[e._v("编辑")]),t("a",{staticStyle:{"margin-left":"20px"},on:{click:function(t){return e.handlerDel(a)}}},[e._v("删除")])]],2)}},{key:"icon",fn:function(e,r){return t("span",{},[t("img",{staticStyle:{width:"64px",height:"64px"},attrs:{src:r.icon}})])}}])}),t("SaveCommodity",{ref:"createForm",on:{ok:function(t){return e.$refs.table.refresh(!0)}}})],1)},l=[],o=r(82165),n=r(72863),i=r(70206),s=(r(68309),function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.ruleForm&&e.ruleForm.id?"编辑商品":"新增商品",width:840,visible:e.visible,confirmLoading:e.loading},on:{ok:e.confirmHandler,cancel:e.cancelHandler}},[t("a-spin",{attrs:{spinning:e.loading}},[t("a-form-model",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-col":{span:3},"wrapper-col":{span:18}}},[t("a-form-model-item",{attrs:{label:"商品名称",prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入商品名称",allowClear:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("a-form-model-item",{attrs:{label:"商品价格",prop:"name"}},[t("a-input",{attrs:{type:"number",placeholder:"请输入商品价格",allowClear:""},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}})],1),t("a-form-model-item",{attrs:{label:"商品描述",prop:"productDesc"}},[t("a-input",{attrs:{placeholder:"请输入商品描述",allowClear:""},model:{value:e.ruleForm.productDesc,callback:function(t){e.$set(e.ruleForm,"productDesc",t)},expression:"ruleForm.productDesc"}})],1),t("a-form-model-item",{attrs:{label:"贡献值",prop:"gxz"}},[t("a-input",{attrs:{placeholder:"请输入贡献值",allowClear:""},model:{value:e.ruleForm.gxz,callback:function(t){e.$set(e.ruleForm,"gxz",t)},expression:"ruleForm.gxz"}})],1),t("a-form-model-item",{attrs:{label:"商品图片",prop:"icon"}},[t("a-upload",{staticClass:"avatar-uploader",attrs:{name:"file","list-type":"picture-card","show-upload-list":!1,action:e.UploadUrl},on:{change:e.handleChange}},[e.ruleForm.icon?t("img",{staticClass:"img",attrs:{src:e.ruleForm.icon,alt:"avatar"}}):t("div",[t("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v(" Upload ")])],1)])],1)],1)],1)],1)}),u=[],c=r(3360),d=(r(74916),r(59811)),m=function(e,t,r){/^[1-9]\d*$/.test(t)?r():r(new Error("请输入正整数"))},p={name:"SaveCommodity",data:function(){return{visible:!1,loading:!1,ruleForm:{},rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],productDesc:[{required:!0,message:"请输入商品描述",trigger:"blur"}],gxz:[{required:!0,message:"请输入贡献值",trigger:"blur"},{validator:m}],icon:[{required:!0,message:"请上传图片",trigger:"blur"}]},userLevelArr:d.Y,UploadUrl:"/api/file/upload"}},methods:{open:function(e){var t=this;this.ruleForm=(0,c.Z)({},e),this.visible=!0,e.title||setTimeout((function(){t.$refs.ruleForm.clearValidate()}),100)},handleChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(this.loading=!1,this.ruleForm.icon=e.file.response.data):this.loading=!0},cancelHandler:function(){this.visible=!1},confirmHandler:function(){var e=this;this.$refs.ruleForm.validate((function(t){t&&(e.loading=!0,(0,i.gg)(e.ruleForm).then((function(){e.loading=!1,e.$notification.success({message:"成功提示",description:"".concat(e.ruleForm.id?"编辑":"创建","商品成功")}),e.visible=!1,e.$emit("ok")})).catch((function(){e.loading=!1})))}))}}},f=p,h=r(1001),g=(0,h.Z)(f,s,u,!1,null,"b0f3fa6a",null),v=g.exports,b=[{title:"商品名称",dataIndex:"name"},{title:"商品价格",dataIndex:"price"},{title:"商品描述",dataIndex:"productDesc"},{title:"商品图片",dataIndex:"icon",scopedSlots:{customRender:"icon"}},{title:"贡献值",dataIndex:"gxz"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],F={name:"CommodityList",components:{SaveCommodity:v,CreateForm:n.Z,STable:o.m7},data:function(){var e=this;return{columns:b,tableData:[],showSaveModel:!1,saveForm:{title:"",mainText:""},showDetailModel:!1,details:{title:"",mainText:""},loadData:function(t){var r=Object.assign({},t,e.queryParam);return(0,i["if"])(r).then((function(e){return e.data}))}}},methods:{handlerDel:function(e){var t=this;(0,i.Hl)(e).then((function(e){t.$refs.table.refresh(!0)}))},clientSave:function(){this.saveForm={title:"",mainText:""},this.showSaveModel=!0},handlerShowDetails:function(e){this.$refs.createForm.open(e)}},mounted:function(){}},x=F,k=(0,h.Z)(x,a,l,!1,null,"619c5e18",null),w=k.exports},72863:function(e,t,r){r.d(t,{Z:function(){return p}});var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.ruleForm&&e.ruleForm.id?"公告详情":"创建公告",width:840,visible:e.visible,confirmLoading:e.loading,"ok-button-props":{props:{disabled:!(!e.ruleForm||!e.ruleForm.id)}}},on:{ok:e.confirmHandler,cancel:e.cancelHandler}},[t("a-spin",{attrs:{spinning:e.loading}},[t("a-form-model",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-col":{span:3},"wrapper-col":{span:18}}},[t("a-form-model-item",{attrs:{label:"公告标题",prop:"title"}},[t("a-input",{attrs:{placeholder:"请输入公告标题",allowClear:""},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),t("a-form-model-item",{attrs:{label:"公告说明",prop:"mainText"}},[t("quill-editor",{model:{value:e.ruleForm.mainText,callback:function(t){e.$set(e.ruleForm,"mainText",t)},expression:"ruleForm.mainText"}})],1)],1)],1)],1)},l=[],o=r(3360),n=r(70206),i=r(59811),s=r(82165),u={components:{QuillEditor:s.Bn},data:function(){return{visible:!1,loading:!1,ruleForm:{},rules:{title:[{required:!0,message:"请输入公告标题",trigger:"blur"}],mainText:[{required:!0,message:"请输入公告说明",trigger:"blur"}]},userLevelArr:i.Y}},methods:{open:function(e){var t=this;this.ruleForm=(0,o.Z)({},e),this.ruleForm.type="cn",this.visible=!0,e.title||setTimeout((function(){t.$refs.ruleForm.clearValidate()}),100)},cancelHandler:function(){this.visible=!1},confirmHandler:function(){var e=this;this.$refs.ruleForm.validate((function(t){t&&(e.loading=!0,(0,n.iI)(e.ruleForm).then((function(){e.loading=!1,e.$notification.success({message:"成功提示",description:"".concat(e.ruleForm.id?"编辑":"创建","公告成功")}),e.visible=!1,e.$emit("ok")})).catch((function(){e.loading=!1})))}))}}},c=u,d=r(1001),m=(0,d.Z)(c,a,l,!1,null,null,null),p=m.exports},59811:function(e,t,r){r.d(t,{Y:function(){return a}});var a=[{value:"1",label:"个人代理"},{value:"2",label:"企业代理"},{value:"3",label:"县级代理"},{value:"4",label:"城市代理"},{value:"5",label:"省级代理"}]}}]);